import e from"immutability-helper";import t from"slugify";import{isUndefined as a,isNull as r,isEqual as s,isObject as n,isArray as o,uniq as p}from"lodash";import l from"currency.js";import{useCallback as c,useEffect as u}from"react";function _(e,a="_"){return t(String(e),{replacement:a,remove:/[*+~.()'"!:@]/g,lower:!1})}function i(t={message:"",message_title:"",message_tag:"",message_payload:{},loading:!1,validation:{},input:{},parameter:{},filter:{},modal:{},status:null,media_device:null},a){let{key:r,value:s}=a.payload||{},n={},o={},p=!1,l=null,c=[],u=[];switch(r=_(String(r),"_"),a.type){case"SET_MULTI_FILTER":return o={...t.filter,...a.payload},e(t,{filter:{$set:o}});case"SET_FILTER":try{c=r.split("["),l=t.filter[c[0]],l&&(p=!0)}catch(e){}try{return u=r.match(/\[(\S+)\]/),p?e(t,{filter:{[c[0]]:{[String(u[1])]:{$set:s}}}}):(l={[String(u[1])]:s},e(t,{filter:{[c[0]]:{$set:l}}}))}catch(a){return e(t,{filter:{[r]:{$set:s}}})}break;case"SET_MULTI_PARAMETER":return o={...t.parameter,...a.payload},e(t,{parameter:{$set:o}});case"RESET_SELECTED":return Object.keys(t.parameter).map((e,a)=>{"selected"!=e.substr(0,8)&&(n[e]=t.parameter[e])}),e(t,{parameter:{$set:n}});case"SET_PARAMETER":p=!1;try{c=r.split("["),l=t.parameter[c[0]],l&&(p=!0)}catch(e){}try{return u=r.match(/\[(\S+)\]/),p?e(t,{parameter:{[c[0]]:{[String(u[1])]:{$set:s}}}}):(l={[String(u[1])]:s},e(t,{parameter:{[c[0]]:{$set:l}}}))}catch(a){return e(t,{parameter:{[r]:{$set:s}}})}break;case"SET_MULTI_INPUT":return o={...t.input,...a.payload},e(t,{input:{$set:o}});case"SET_INPUT":p=!1,l={};try{c=r.split("["),l=t.input[c[0]],l&&(p=!0)}catch(e){}try{return u=r.match(/\[(\S+)\]/),p?e(t,{input:{[c[0]]:{[String(u[1])]:{$set:s}}}}):(l={[String(u[1])]:s},e(t,{input:{[c[0]]:{$set:l}}}))}catch(a){return e(t,{input:{[r]:{$set:s}}})}break;case"SET_MESSAGE":return e(t,{message:{$set:a.payload}});case"SET_MESSAGE_TITLE":return e(t,{message_title:{$set:a.payload}});case"SET_MESSAGE_TAG":return e(t,{message_tag:{$set:a.payload}});case"SET_MESSAGE_PAYLOAD":return e(t,{message_payload:{$set:a.payload}});case"SET_MODAL":return e(t,{modal:{[r]:{$set:s}}});case"SET_LOADING":return e(t,{loading:{$set:a.payload}});case"RESET_VALIDATION_MESSAGE":return e(t,{message:{$set:""},validation:{$set:{}}});case"RESET_VALIDATION":return e(t,{loading:{$set:!1},validation:{$set:{}}});case"RESET_INPUT":return e(t,{input:{$set:{}}});case"SET_MEDIA_DEVICE":return e(t,{media_device:{$set:a.payload}});case"RESET_PARAMETER":return e(t,{parameter:{$set:{}}});case"RESET_FILTER":return e(t,{filter:{$set:{}}});case"SET_STATUS":return e(t,{status:{$set:a.payload}});case"SET_VALIDATION":return e(t,{validation:{$set:a.payload}});default:return t}}function E(t={role:"",user:{},token:"",forgot_password:{},loading:!1},a){switch(a.type){case"DO_LOGIN":return e(t,{user:{$set:a.payload}});case"SET_LOADING_AUTH":return e(t,{loading:{$set:a.payload}});case"OAUTH_LOGIN":return e(t,{token:{$set:a.payload}});case"SET_ROLE":return e(t,{user:{$set:{...t.user,role:a.payload}}});case"DO_FORGOT_PASSWORD":return e(t,{forgot_password:{$set:a.payload}});case"DO_LOGOUT":return e(t,{user:{$set:{}},token:{$set:null}});default:return t}}function T(e,t){let s=null;try{let n=e.split("["),o=n[1].replace("]",""),p=n[0];s=a(t[p][o])||r(t[p][o])?null:t[p][o]}catch(n){s=a(t[e])||r(t[e])?null:t[e]}return s}function d(e,t,a=""){if("NULL"!=(a=String(a).toUpperCase()))if(s(a,"EXTRANET")||t({type:"SET_LOADING_"+a,payload:!1}),e.response){s(a,"EXTRANET")||t({type:"SET_STATUS_"+a,payload:e.response.status}),t({type:"SET_STATUS",payload:e.response.status}),422==e.response.status&&t({type:"SET_VALIDATION",payload:e.response.data});try{e.response.data.message&&t({type:"SET_MESSAGE",payload:e.response.data.message})}catch(e){}try{e.response.data.data&&t({type:"SET_MESSAGE_PAYLOAD",payload:e.response.data.data})}catch(e){}try{"invalid_grant"==e.response.data.error&&t({type:"SET_MESSAGE",payload:"Email / Password salah"})}catch(e){}try{e.response.data.logout&&t({type:"DO_LOGOUT",payload:!0})}catch(e){}}else e.request&&t({type:"SET_MESSAGE",payload:"Terjadi kesalahan, silahkan dicoba kembali"})}function S(e,t,a=""){"NULL"!=(a=String(a).toUpperCase())&&(s(a,"EXTRANET")||(t({type:"SET_STATUS_"+a,payload:e.status}),t({type:"SET_LOADING_"+a,payload:!1})))}function y(e,t=""){return l(e,{symbol:t+" ",separator:".",decimal:",",precision:2}).format()}function m(e){let t=new FormData;return n(e)&&Object.keys(e).map((s,p)=>{if(o(e[s]))for(let o=0;o<e[s].length;o++)n(e[s][o])?Object.keys(e[s][o]).map((n,p)=>{a(e[s][o][n])||r(e[s][o][n])||t.append(s+"["+o+"]["+n+"]",e[s][o][n])}):a(e[s][o])||r(e[s][o])||t.append(s+"["+o+"]",e[s][o]);else n(e[s])?Object.keys(e[s]).map((n,o)=>{a(e[s][n])||r(e[s][n])||t.append(s+"["+n+"]",e[s][n])}):a(e[s])||r(e[s])||t.append(s,e[s]);return!0}),t}function A(e,t="multipart/form-data"){let a=process.env.REACT_APP_API_TOKEN_TYPE,r=process.env.REACT_APP_API_ACCESS_TOKEN;try{a=e.token.token_type||"",r=e.token.access_token||""}catch(e){}return{Authorization:String(a+" "+r).trim(),"Content-Type":t}}function g(e,t,a){let r=c(e,a);u(()=>{let e=setTimeout(()=>{r()},t);return()=>{clearTimeout(e)}},[r,t])}function h(e,t,s){let n=1,o=10,l="",c=[],u={};try{n=e[_("page_"+s,"_")],o=e[_("load_"+s,"_")],l=e[_("keyword_"+s,"_")]}catch(e){}Object.keys(e).map((e,a)=>{let r=_("search_"+s+"_","_"),n=_("sort_"+s+"_","_");e.toLowerCase().substring(0,r.length)==r.toLowerCase()&&t.push(e.replace(r+"_","")),e.toLowerCase().substring(0,n.length)==n.toLowerCase()&&t.push(e.replace(n+"_",""))}),t=p(t);for(let n=0;n<t.length;n++){let o=t[n]||"";try{let t=e[_("search_"+s+"_"+o,"_")];r(t)||a(t)||(u[o]=t)}catch(e){}try{let t=e[_("sort_"+s+"_"+o,"_")];r(t)||a(t)||c.push({id:o,desc:"desc"==t})}catch(e){}}return{page:n||1,load:o||10,keyword:l||"",sorted:c||[],search:u||{}}}export{E as authReducer,i as coreReducer,h as defaultFilterData,d as fetchErrorDispatch,S as fetchSuccessDispatch,T as findArrayName,y as numberFormat,m as secureData,A as setAuthHeader,_ as slug,g as useDebounce};
//# sourceMappingURL=index.modern.js.map
