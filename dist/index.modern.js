import e from"immutability-helper";import t from"slugify";import{isUndefined as a,isNull as r,isEqual as s,isObject as n,isArray as o,uniq as p}from"lodash";import{useCallback as i,useEffect as c}from"react";function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function l(e,a){return void 0===a&&(a="_"),t(String(e),{replacement:a,remove:/[*+~.()'"!:@]/g,lower:!1})}function _(t,a){var r;void 0===t&&(t={message:"",message_title:"",message_tag:"",message_payload:{},loading:!1,validation:{},input:{},parameter:{},filter:{},modal:{},status:null,media_device:null});var s=a.payload||{},n=s.key,o=s.value,p={},i={},c=!1,_=[],d=[];switch(n=l(String(n),"_"),a.type){case"SET_MULTI_FILTER":return i=u({},t.filter,a.payload),e(t,{filter:{$set:i}});case"SET_FILTER":try{_=n.split("["),t.filter[_[0]]&&(c=!0)}catch(e){}try{var E,S,T,y;return d=n.match(/\[(\S+)\]/),c?e(t,{filter:(S={},S[_[0]]=(E={},E[String(d[1])]={$set:o},E),S)}):((T={})[String(d[1])]=o,e(t,{filter:(y={},y[_[0]]={$set:T},y)}))}catch(a){var m;return e(t,{filter:(m={},m[n]={$set:o},m)})}break;case"SET_MULTI_PARAMETER":return i=u({},t.parameter,a.payload),e(t,{parameter:{$set:i}});case"RESET_SELECTED":return Object.keys(t.parameter).map(function(e,a){"selected"!=e.substr(0,8)&&(p[e]=t.parameter[e])}),e(t,{parameter:{$set:p}});case"SET_PARAMETER":c=!1;try{_=n.split("["),t.parameter[_[0]]&&(c=!0)}catch(e){}try{var A,g,f,v;return d=n.match(/\[(\S+)\]/),c?e(t,{parameter:(g={},g[_[0]]=(A={},A[String(d[1])]={$set:o},A),g)}):((f={})[String(d[1])]=o,e(t,{parameter:(v={},v[_[0]]={$set:f},v)}))}catch(a){var h;return e(t,{parameter:(h={},h[n]={$set:o},h)})}break;case"SET_MULTI_INPUT":return i=u({},t.input,a.payload),e(t,{input:{$set:i}});case"SET_INPUT":c=!1;try{_=n.split("["),t.input[_[0]]&&(c=!0)}catch(e){}try{var O,$,L,I;return d=n.match(/\[(\S+)\]/),c?e(t,{input:($={},$[_[0]]=(O={},O[String(d[1])]={$set:o},O),$)}):((L={})[String(d[1])]=o,e(t,{input:(I={},I[_[0]]={$set:L},I)}))}catch(a){var R;return e(t,{input:(R={},R[n]={$set:o},R)})}break;case"SET_MESSAGE":return e(t,{message:{$set:a.payload}});case"SET_MESSAGE_TITLE":return e(t,{message_title:{$set:a.payload}});case"SET_MESSAGE_TAG":return e(t,{message_tag:{$set:a.payload}});case"SET_MESSAGE_PAYLOAD":return e(t,{message_payload:{$set:a.payload}});case"SET_MODAL":return e(t,{modal:(r={},r[n]={$set:o},r)});case"SET_LOADING":return e(t,{loading:{$set:a.payload}});case"RESET_VALIDATION_MESSAGE":return e(t,{message:{$set:""},validation:{$set:{}}});case"RESET_VALIDATION":return e(t,{loading:{$set:!1},validation:{$set:{}}});case"RESET_INPUT":return e(t,{input:{$set:{}}});case"SET_MEDIA_DEVICE":return e(t,{media_device:{$set:a.payload}});case"RESET_PARAMETER":return e(t,{parameter:{$set:{}}});case"RESET_FILTER":return e(t,{filter:{$set:{}}});case"SET_STATUS":return e(t,{status:{$set:a.payload}});case"SET_VALIDATION":return e(t,{validation:{$set:a.payload}});default:return t}}function d(t,a){switch(void 0===t&&(t={role:"",user:{},token:"",forgot_password:{},loading:!1}),a.type){case"DO_LOGIN":return e(t,{user:{$set:a.payload}});case"SET_LOADING_AUTH":return e(t,{loading:{$set:a.payload}});case"OAUTH_LOGIN":return e(t,{token:{$set:a.payload}});case"SET_ROLE":return e(t,{user:{$set:u({},t.user,{role:a.payload})}});case"DO_FORGOT_PASSWORD":return e(t,{forgot_password:{$set:a.payload}});case"DO_LOGOUT":return e(t,{user:{$set:{}},token:{$set:null}});default:return t}}function E(e,t){var s=null;try{var n=e.split("["),o=n[1].replace("]",""),p=n[0];s=a(t[p][o])||r(t[p][o])?null:t[p][o]}catch(n){s=a(t[e])||r(t[e])?null:t[e]}return s}function S(e,t,a){if(void 0===a&&(a=""),"NULL"!=(a=String(a).toUpperCase()))if(s(a,"EXTRANET")||t({type:"SET_LOADING_"+a,payload:!1}),e.response){s(a,"EXTRANET")||t({type:"SET_STATUS_"+a,payload:e.response.status}),t({type:"SET_STATUS",payload:e.response.status}),422==e.response.status&&t({type:"SET_VALIDATION",payload:e.response.data});try{e.response.data.message&&t({type:"SET_MESSAGE",payload:e.response.data.message})}catch(e){}try{e.response.data.data&&t({type:"SET_MESSAGE_PAYLOAD",payload:e.response.data.data})}catch(e){}try{"invalid_grant"==e.response.data.error&&t({type:"SET_MESSAGE",payload:"Email / Password salah"})}catch(e){}try{e.response.data.logout&&t({type:"DO_LOGOUT",payload:!0})}catch(e){}}else e.request&&t({type:"SET_MESSAGE",payload:"Terjadi kesalahan, silahkan dicoba kembali"})}function T(e,t,a){void 0===a&&(a=""),"NULL"!=(a=String(a).toUpperCase())&&(s(a,"EXTRANET")||(t({type:"SET_STATUS_"+a,payload:e.status}),t({type:"SET_LOADING_"+a,payload:!1})))}function y(e,t){void 0===t&&(t="");var a="-"==String(e).substr(0,1),r=String(e).replace(/[^,\d]/g,"").toString().split(","),s=r[0].length%3,n=r[0].substr(0,s),o=r[0].substr(s).match(/\d{3}/gi);return o&&(n+=(s?".":"")+o.join(".")),t=a?"-"+t:t,(n=null!=r[1]?n+","+r[1]:n)?t+n:t+"0"}function m(e){var t=new FormData;return n(e)&&Object.keys(e).map(function(s,p){if(o(e[s]))for(var i=function(o){n(e[s][o])?Object.keys(e[s][o]).map(function(n,p){a(e[s][o][n])||r(e[s][o][n])||t.append(s+"["+o+"]["+n+"]",e[s][o][n])}):a(e[s][o])||r(e[s][o])||t.append(s+"["+o+"]",e[s][o])},c=0;c<e[s].length;c++)i(c);else n(e[s])?Object.keys(e[s]).map(function(n,o){a(e[s][n])||r(e[s][n])||t.append(s+"["+n+"]",e[s][n])}):a(e[s])||r(e[s])||t.append(s,e[s]);return!0}),t}function A(e,t){void 0===t&&(t="multipart/form-data");var a=process.env.REACT_APP_API_TOKEN_TYPE,r=process.env.REACT_APP_API_ACCESS_TOKEN;try{a=e.token.token_type||"",r=e.token.access_token||""}catch(e){}return{Authorization:String(a+" "+r).trim(),"Content-Type":t}}function g(e,t,a){var r=i(e,a);c(function(){var e=setTimeout(function(){r()},t);return function(){clearTimeout(e)}},[r,t])}function f(e,t,s){var n=1,o=10,i="",c=[],u={};try{n=e[l("page_"+s,"_")],o=e[l("load_"+s,"_")],i=e[l("keyword_"+s,"_")]}catch(e){}Object.keys(e).map(function(e,a){var r=l("search_"+s+"_","_"),n=l("sort_"+s+"_","_");e.toLowerCase().substring(0,r.length)==r.toLowerCase()&&t.push(e.replace(r+"_","")),e.toLowerCase().substring(0,n.length)==n.toLowerCase()&&t.push(e.replace(n+"_",""))}),t=p(t);for(var _=0;_<t.length;_++){var d=t[_]||"";try{var E=e[l("search_"+s+"_"+d,"_")];r(E)||a(E)||(u[d]=E)}catch(e){}try{var S=e[l("sort_"+s+"_"+d,"_")];r(S)||a(S)||c.push({id:d,desc:"desc"==S})}catch(e){}}return{page:n||1,load:o||10,keyword:i||"",sorted:c||[],search:u||{}}}export{d as authReducer,_ as coreReducer,f as defaultFilterData,S as fetchErrorDispatch,T as fetchSuccessDispatch,E as findArrayName,y as numberFormat,m as secureData,A as setAuthHeader,l as slug,g as useDebounce};
//# sourceMappingURL=index.modern.js.map
