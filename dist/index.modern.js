import e from"immutability-helper";import t from"slugify";import{isUndefined as a,isNull as r,isEqual as s,isObject as n,isArray as o,uniq as l}from"lodash";import{useCallback as p,useEffect as c}from"react";function u(e,a="_"){return t(String(e),{replacement:a,remove:/[*+~.()'"!:@]/g,lower:!1})}function i(t={message:"",message_title:"",message_tag:"",message_payload:{},loading:!1,validation:{},input:{},parameter:{},filter:{},modal:{},status:null,media_device:null},a){let{key:r,value:s}=a.payload||{},n={},o={},l=!1,p=null,c=[],i=[];switch(r=u(String(r),"_"),a.type){case"SET_MULTI_FILTER":return o={...t.filter,...a.payload},e(t,{filter:{$set:o}});case"SET_FILTER":try{c=r.split("["),p=t.filter[c[0]],p&&(l=!0)}catch(e){}try{return i=r.match(/\[(\S+)\]/),l?e(t,{filter:{[c[0]]:{[String(i[1])]:{$set:s}}}}):(p={[String(i[1])]:s},e(t,{filter:{[c[0]]:{$set:p}}}))}catch(a){return e(t,{filter:{[r]:{$set:s}}})}break;case"SET_MULTI_PARAMETER":return o={...t.parameter,...a.payload},e(t,{parameter:{$set:o}});case"RESET_SELECTED":return Object.keys(t.parameter).map((e,a)=>{"selected"!=e.substr(0,8)&&(n[e]=t.parameter[e])}),e(t,{parameter:{$set:n}});case"SET_PARAMETER":l=!1;try{c=r.split("["),p=t.parameter[c[0]],p&&(l=!0)}catch(e){}try{return i=r.match(/\[(\S+)\]/),l?e(t,{parameter:{[c[0]]:{[String(i[1])]:{$set:s}}}}):(p={[String(i[1])]:s},e(t,{parameter:{[c[0]]:{$set:p}}}))}catch(a){return e(t,{parameter:{[r]:{$set:s}}})}break;case"SET_MULTI_INPUT":return o={...t.input,...a.payload},e(t,{input:{$set:o}});case"SET_INPUT":l=!1,p={};try{c=r.split("["),p=t.input[c[0]],p&&(l=!0)}catch(e){}try{return i=r.match(/\[(\S+)\]/),l?e(t,{input:{[c[0]]:{[String(i[1])]:{$set:s}}}}):(p={[String(i[1])]:s},e(t,{input:{[c[0]]:{$set:p}}}))}catch(a){return e(t,{input:{[r]:{$set:s}}})}break;case"SET_MESSAGE":return e(t,{message:{$set:a.payload}});case"SET_MESSAGE_TITLE":return e(t,{message_title:{$set:a.payload}});case"SET_MESSAGE_TAG":return e(t,{message_tag:{$set:a.payload}});case"SET_MESSAGE_PAYLOAD":return e(t,{message_payload:{$set:a.payload}});case"SET_MODAL":return e(t,{modal:{[r]:{$set:s}}});case"SET_LOADING":return e(t,{loading:{$set:a.payload}});case"RESET_VALIDATION_MESSAGE":return e(t,{message:{$set:""},validation:{$set:{}}});case"RESET_VALIDATION":return e(t,{loading:{$set:!1},validation:{$set:{}}});case"RESET_INPUT":return e(t,{input:{$set:{}}});case"SET_MEDIA_DEVICE":return e(t,{media_device:{$set:a.payload}});case"RESET_PARAMETER":return e(t,{parameter:{$set:{}}});case"RESET_FILTER":return e(t,{filter:{$set:{}}});case"SET_STATUS":return e(t,{status:{$set:a.payload}});case"SET_VALIDATION":return e(t,{validation:{$set:a.payload}});default:return t}}function _(t={role:"",user:{},token:"",forgot_password:{},loading:!1},a){switch(a.type){case"DO_LOGIN":return e(t,{user:{$set:a.payload}});case"SET_LOADING_AUTH":return e(t,{loading:{$set:a.payload}});case"OAUTH_LOGIN":return e(t,{token:{$set:a.payload}});case"SET_ROLE":return e(t,{user:{$set:{...t.user,role:a.payload}}});case"DO_FORGOT_PASSWORD":return e(t,{forgot_password:{$set:a.payload}});case"DO_LOGOUT":return e(t,{user:{$set:{}},token:{$set:null}});default:return t}}function E(e,t){let s=null;try{let n=e.split("["),o=n[1].replace("]",""),l=n[0];s=a(t[l][o])||r(t[l][o])?null:t[l][o]}catch(n){s=a(t[e])||r(t[e])?null:t[e]}return s}function d(e,t,a=""){if("NULL"!=(a=String(a).toUpperCase()))if(s(a,"EXTRANET")||t({type:"SET_LOADING_"+a,payload:!1}),e.response){s(a,"EXTRANET")||t({type:"SET_STATUS_"+a,payload:e.response.status}),t({type:"SET_STATUS",payload:e.response.status}),422==e.response.status&&t({type:"SET_VALIDATION",payload:e.response.data});try{e.response.data.message&&t({type:"SET_MESSAGE",payload:e.response.data.message})}catch(e){}try{e.response.data.data&&t({type:"SET_MESSAGE_PAYLOAD",payload:e.response.data.data})}catch(e){}try{"invalid_grant"==e.response.data.error&&t({type:"SET_MESSAGE",payload:"Email / Password salah"})}catch(e){}try{e.response.data.logout&&t({type:"DO_LOGOUT",payload:!0})}catch(e){}}else e.request&&t({type:"SET_MESSAGE",payload:"Terjadi kesalahan, silahkan dicoba kembali"})}function S(e,t,a=""){"NULL"!=(a=String(a).toUpperCase())&&(s(a,"EXTRANET")||(t({type:"SET_STATUS_"+a,payload:e.status}),t({type:"SET_LOADING_"+a,payload:!1})))}function T(e,t=""){let a="-"==String(e).substr(0,1),r=String(e).replace(/[^,\d]/g,"").toString().split(","),s=r[0].length%3,n=r[0].substr(0,s),o=r[0].substr(s).match(/\d{3}/gi);return o&&(n+=(s?".":"")+o.join(".")),t=a?"-"+t:t,n=null!=r[1]?n+","+r[1]:n,n?t+n:t+"0"}function y(e){let t=new FormData;return n(e)&&Object.keys(e).map((s,l)=>{if(o(e[s]))for(let o=0;o<e[s].length;o++)n(e[s][o])?Object.keys(e[s][o]).map((n,l)=>{a(e[s][o][n])||r(e[s][o][n])||t.append(s+"["+o+"]["+n+"]",e[s][o][n])}):a(e[s][o])||r(e[s][o])||t.append(s+"["+o+"]",e[s][o]);else n(e[s])?Object.keys(e[s]).map((n,o)=>{a(e[s][n])||r(e[s][n])||t.append(s+"["+n+"]",e[s][n])}):a(e[s])||r(e[s])||t.append(s,e[s]);return!0}),t}function m(e,t="multipart/form-data"){let a=process.env.REACT_APP_API_TOKEN_TYPE,r=process.env.REACT_APP_API_ACCESS_TOKEN;try{a=e.token.token_type||"",r=e.token.access_token||""}catch(e){}return{Authorization:String(a+" "+r).trim(),"Content-Type":t}}function A(e,t,a){let r=p(e,a);c(()=>{let e=setTimeout(()=>{r()},t);return()=>{clearTimeout(e)}},[r,t])}function g(e,t,s){let n=1,o=10,p="",c=[],i={};try{n=e[u("page_"+s,"_")],o=e[u("load_"+s,"_")],p=e[u("keyword_"+s,"_")]}catch(e){}Object.keys(e).map((e,a)=>{let r=u("search_"+s+"_","_"),n=u("sort_"+s+"_","_");e.toLowerCase().substring(0,r.length)==r.toLowerCase()&&t.push(e.replace(r+"_","")),e.toLowerCase().substring(0,n.length)==n.toLowerCase()&&t.push(e.replace(n+"_",""))}),t=l(t);for(let n=0;n<t.length;n++){let o=t[n]||"";try{let t=e[u("search_"+s+"_"+o,"_")];r(t)||a(t)||(i[o]=t)}catch(e){}try{let t=e[u("sort_"+s+"_"+o,"_")];r(t)||a(t)||c.push({id:o,desc:"desc"==t})}catch(e){}}return{page:n||1,load:o||10,keyword:p||"",sorted:c||[],search:i||{}}}export{_ as authReducer,i as coreReducer,g as defaultFilterData,d as fetchErrorDispatch,S as fetchSuccessDispatch,E as findArrayName,T as numberFormat,y as secureData,m as setAuthHeader,u as slug,A as useDebounce};
//# sourceMappingURL=index.modern.js.map
